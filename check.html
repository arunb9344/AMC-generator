<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AMC Quotation Generator - Eye Tech Securities</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .form-container {
            padding: 40px;
        }

        .form-section {
            margin-bottom: 35px;
        }

        .section-title {
            font-size: 1.4rem;
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #3498db;
            font-weight: 600;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #34495e;
            font-size: 0.95rem;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e6ed;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: #f8f9fa;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #3498db;
            background: white;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 80px;
        }

        .package-selection {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 15px;
        }

        .package-card {
            border: 2px solid #e0e6ed;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #f8f9fa;
        }

        .package-card:hover {
            border-color: #3498db;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .package-card.selected {
            border-color: #3498db;
            background: #ebf3fd;
        }

        .package-card h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.3rem;
        }

        .package-price {
            font-size: 1.5rem;
            font-weight: bold;
            color: #27ae60;
            margin-bottom: 5px;
        }

        .package-original-price {
            text-decoration: line-through;
            color: #e74c3c;
            font-size: 1.1rem;
            opacity: 0.7;
        }

        .package-card input[type="radio"] {
            display: none;
        }

        .calculation-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 12px;
            margin: 25px 0;
        }

        .calculation-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .calculation-row.total {
            border-top: 2px solid #3498db;
            padding-top: 15px;
            font-weight: bold;
            font-size: 1.3rem;
            color: #2c3e50;
        }

        .btn {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-container {
            text-align: center;
            margin-top: 30px;
        }

        @media (max-width: 768px) {
            .package-selection {
                grid-template-columns: 1fr;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .form-container {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>AMC Quotation Generator</h1>
            <p>Eye Tech Securities - Professional CCTV Maintenance Services</p>
        </div>

        <div class="form-container">
            <form id="quotationForm">
                <!-- Customer Details -->
                <div class="form-section">
                    <h2 class="section-title">Customer Details</h2>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="customerName">Customer Name *</label>
                            <input type="text" id="customerName" name="customerName" required>
                        </div>
                        <div class="form-group">
                            <label for="customerPhone">Phone Number *</label>
                            <input type="tel" id="customerPhone" name="customerPhone" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="customerAddress">Address *</label>
                        <textarea id="customerAddress" name="customerAddress" rows="3" required></textarea>
                    </div>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="customerEmail">Email</label>
                            <input type="email" id="customerEmail" name="customerEmail">
                        </div>
                        <div class="form-group">
                            <label for="customerGST">GST Number</label>
                            <input type="text" id="customerGST" name="customerGST">
                        </div>
                    </div>
                </div>

                <!-- Quotation Details -->
                <div class="form-section">
                    <h2 class="section-title">Quotation Details</h2>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="quotationDate">Quotation Date *</label>
                            <input type="date" id="quotationDate" name="quotationDate" required>
                        </div>
                        <div class="form-group">
                            <label for="numberOfCameras">Number of Cameras *</label>
                            <input type="number" id="numberOfCameras" name="numberOfCameras" min="1" required>
                        </div>
                    </div>
                </div>

                <!-- Package Selection -->
                <div class="form-section">
                    <h2 class="section-title">Select Package</h2>
                    <div class="package-selection">
                        <div class="package-card" onclick="selectPackage('residential')">
                            <input type="radio" id="residential" name="package" value="residential">
                            <h3>Residential Package</h3>
                            <div class="package-price">₹800 per camera</div>
                            <div class="package-original-price">₹1000 per camera</div>
                        </div>
                        <div class="package-card" onclick="selectPackage('commercial')">
                            <input type="radio" id="commercial" name="package" value="commercial">
                            <h3>Commercial Package</h3>
                            <div class="package-price">₹1300 per camera</div>
                            <div class="package-original-price">₹1500 per camera</div>
                        </div>
                    </div>
                </div>

                <!-- Calculation Display -->
                <div class="calculation-section" id="calculationSection" style="display: none;">
                    <h3 style="margin-bottom: 20px; color: #2c3e50;">Quotation Summary</h3>
                    <div class="calculation-row">
                        <span>Number of Cameras:</span>
                        <span id="displayCameras">0</span>
                    </div>
                    <div class="calculation-row">
                        <span>Package Selected:</span>
                        <span id="displayPackage">-</span>
                    </div>
                    <div class="calculation-row">
                        <span>Rate per Camera:</span>
                        <span id="displayRate">₹0</span>
                    </div>
                    <div class="calculation-row">
                        <span>Subtotal:</span>
                        <span id="displaySubtotal">₹0</span>
                    </div>
                    <div class="calculation-row">
                        <span>GST (18%):</span>
                        <span id="displayGST">₹0</span>
                    </div>
                    <div class="calculation-row total">
                        <span>Total Amount:</span>
                        <span id="displayTotal">₹0</span>
                    </div>
                </div>

                <div class="btn-container">
                    <button type="button" class="btn" onclick="generateQuotationPDF()">Generate Quotation PDF</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Set today's date as default
        document.getElementById('quotationDate').valueAsDate = new Date();

        // Package selection
        function selectPackage(packageType) {
            // Remove selected class from all cards
            document.querySelectorAll('.package-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // Add selected class to clicked card
            event.currentTarget.classList.add('selected');
            
            // Select the radio button
            document.getElementById(packageType).checked = true;
            
            // Update calculation
            updateCalculation();
        }

        // Update calculation when inputs change
        document.getElementById('numberOfCameras').addEventListener('input', updateCalculation);
        document.querySelectorAll('input[name="package"]').forEach(radio => {
            radio.addEventListener('change', updateCalculation);
        });

        function updateCalculation() {
            const cameras = parseInt(document.getElementById('numberOfCameras').value) || 0;
            const packageType = document.querySelector('input[name="package"]:checked');
            
            if (cameras > 0 && packageType) {
                const rates = {
                    residential: 800,
                    commercial: 1300
                };
                
                const packageNames = {
                    residential: 'Residential Package',
                    commercial: 'Commercial Package'
                };
                
                const rate = rates[packageType.value];
                const subtotal = cameras * rate;
                const gst = Math.round(subtotal * 0.18);
                const total = subtotal + gst;
                
                // Update display
                document.getElementById('displayCameras').textContent = cameras;
                document.getElementById('displayPackage').textContent = packageNames[packageType.value];
                document.getElementById('displayRate').textContent = `₹${rate}`;
                document.getElementById('displaySubtotal').textContent = `₹${subtotal.toLocaleString()}`;
                document.getElementById('displayGST').textContent = `₹${gst.toLocaleString()}`;
                document.getElementById('displayTotal').textContent = `₹${total.toLocaleString()}`;
                
                document.getElementById('calculationSection').style.display = 'block';
            } else {
                document.getElementById('calculationSection').style.display = 'none';
            }
        }

        function collectFormData() {
            const formData = new FormData(document.getElementById('quotationForm'));
            const data = {};
            
            for (let [key, value] of formData.entries()) {
                data[key] = value;
            }
            
            // Add calculated values
            const cameras = parseInt(data.numberOfCameras) || 0;
            const rates = { residential: 800, commercial: 1300 };
            const rate = rates[data.package];
            const subtotal = cameras * rate;
            const gst = Math.round(subtotal * 0.18);
            const total = subtotal + gst;
            
            data.rate = rate;
            data.subtotal = subtotal;
            data.gst = gst;
            data.total = total;
            data.packageName = data.package === 'residential' ? 'Residential Package' : 'Commercial Package';
            
            return data;
        }

        function generateQuotationPDF() {
            const data = collectFormData();
            
            // Validation
            if (!data.customerName || !data.customerPhone || !data.customerAddress || 
                !data.quotationDate || !data.numberOfCameras || !data.package) {
                alert('Please fill in all required fields and select a package.');
                return;
            }
            
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // Header
            doc.setFontSize(20);
            doc.setFont(undefined, 'bold');
            doc.text('EYE TECH SECURITIES', 105, 20, { align: 'center' });
            
            doc.setFontSize(12);
            doc.setFont(undefined, 'normal');
            doc.text('AMC QUOTATION', 105, 30, { align: 'center' });
            
            // Quotation details
            doc.setFontSize(10);
            doc.text(`Quotation No: QTN/${new Date(data.quotationDate).getFullYear()}/${String(Math.floor(Math.random() * 1000)).padStart(3, '0')}`, 20, 45);
            doc.text(`Date: ${new Date(data.quotationDate).toLocaleDateString('en-IN')}`, 20, 52);
            doc.text('Valid for: 30 days from issue date', 20, 59);
            
            // Customer details
            doc.setFontSize(12);
            doc.setFont(undefined, 'bold');
            doc.text('CUSTOMER DETAILS:', 20, 75);
            
            doc.setFontSize(10);
            doc.setFont(undefined, 'normal');
            doc.text(`Name: ${data.customerName}`, 20, 85);
            doc.text(`Phone: ${data.customerPhone}`, 20, 92);
            if (data.customerEmail) {
                doc.text(`Email: ${data.customerEmail}`, 20, 99);
            }
            
            // Handle address with line wrapping
            const addressLines = doc.splitTextToSize(`Address: ${data.customerAddress}`, 170);
            let currentY = data.customerEmail ? 106 : 99;
            addressLines.forEach(line => {
                doc.text(line, 20, currentY);
                currentY += 7;
            });
            
            if (data.customerGST) {
                doc.text(`GST: ${data.customerGST}`, 20, currentY);
                currentY += 7;
            }
            
            // Quotation details
            currentY += 10;
            doc.setFontSize(12);
            doc.setFont(undefined, 'bold');
            doc.text('QUOTATION DETAILS:', 20, currentY);
            
            currentY += 15;
            doc.setFontSize(10);
            doc.setFont(undefined, 'normal');
            
            // Table header
            doc.rect(20, currentY, 170, 8);
            doc.setFont(undefined, 'bold');
            doc.text('Description', 25, currentY + 5);
            doc.text('Qty', 100, currentY + 5);
            doc.text('Rate', 125, currentY + 5);
            doc.text('Amount', 160, currentY + 5);
            
            currentY += 8;
            
            // Table content
            doc.rect(20, currentY, 170, 8);
            doc.setFont(undefined, 'normal');
            doc.text(`AMC Service - ${data.packageName}`, 25, currentY + 5);
            doc.text(data.numberOfCameras, 100, currentY + 5);
            doc.text(`₹${data.rate}`, 125, currentY + 5);
            doc.text(`₹${data.subtotal.toLocaleString()}`, 160, currentY + 5);
            
            currentY += 15;
            
            // Totals
            doc.text(`Subtotal: ₹${data.subtotal.toLocaleString()}`, 130, currentY);
            doc.text(`GST (18%): ₹${data.gst.toLocaleString()}`, 130, currentY + 7);
            doc.setFont(undefined, 'bold');
            doc.text(`Total: ₹${data.total.toLocaleString()}`, 130, currentY + 14);
            
            // Terms and conditions
            currentY += 30;
            doc.setFontSize(12);
            doc.setFont(undefined, 'bold');
            doc.text('TERMS & CONDITIONS:', 20, currentY);
            
            currentY += 10;
            doc.setFontSize(8);
            doc.setFont(undefined, 'normal');
            
            const terms = [
                '1) The contract is applicable for 12 months from the agreement date.',
                '2) Contract does not cover damages due to natural disasters, misuse, power surges, lightning, fire, flood, earthquake, or act of God.',
                '3) Offer valid for 30 days from issue date.',
                '4) Equipment must be in working condition at contract signing; customer bears initial repair cost if faulty.',
                '5) Customer must provide ladder, water, power supply, and civil support for maintenance.',
                '6) Missing/stolen items during the contract are customer\'s liability, not covered under AMC.',
                '7) Technician access required during scheduled visits; no refund for missed appointments due to unavailability.',
                '8) Breakdown visits during working hours (Mon-Sat, 9 AM-6 PM); emergency visits may be charged.',
                '9) Contract is non-transferable and non-terminable before completion.',
                '10) Payment due within 30 days of invoice; 2% monthly penalty on overdue amounts.',
                '11) Maintenance includes cleaning, adjustments, calibration, software updates, and health checks.',
                '12) Only registered complaints via proper channels are addressed during breakdown visits.',
                '13) Warranty-covered items replaced free; out-of-warranty items chargeable.',
                '14) Material replacements, spare parts, and consumables chargeable unless under warranty.',
                '15) Connector replacement (Rs. 500/camera) included in first maintenance visit only.',
                '16) Unauthorized equipment modification voids the AMC contract.',
                '17) Service visits scheduled with 24-48 hours notice to customer.',
                '18) Customer responsible for data backup; Eye Tech Securities not liable for data loss.',
                '19) Additional work beyond AMC scope chargeable per prevailing rates.',
                '20) Disputes subject to local court jurisdiction.',
                '21) This contract supersedes prior agreements; modifications require mutual written consent.',
                '22) Force majeure conditions may temporarily suspend service obligations.',
                '23) Maintenance visits non-transferable and not carried forward.',
                '24) 18% GST applies on total contract amount per tax regulations.'
            ];
            
            terms.forEach(term => {
                if (currentY > 270) {
                    doc.addPage();
                    currentY = 20;
                }
                const termLines = doc.splitTextToSize(term, 170);
                termLines.forEach(line => {
                    doc.text(line, 20, currentY);
                    currentY += 4;
                });
                currentY += 2;
            });
            
            // Footer
            if (currentY > 250) {
                doc.addPage();
                currentY = 20;
            }
            
            currentY += 10;
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            doc.text('Eye Tech Securities', 20, currentY);
            doc.setFont(undefined, 'normal');
            doc.text('Authorized Signatory', 20, currentY + 7);
            
            // Save PDF
            const fileName = `AMC_Quotation_${data.customerName.replace(/\s+/g, '_')}_${new Date().toISOString().split('T')[0]}.pdf`;
            doc.save(fileName);
        }
    </script>
</body>
</html>
