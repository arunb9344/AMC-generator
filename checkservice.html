<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AMC Quotation Generator - Eye Tech Securities</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .form-container {
            padding: 40px;
        }

        .form-section {
            margin-bottom: 35px;
        }

        .section-title {
            font-size: 1.4rem;
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #3498db;
            font-weight: 600;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #34495e;
            font-size: 0.95rem;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e6ed;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: #f8f9fa;
        }

        .form-group input[type="checkbox"] {
            width: auto;
            margin-right: 10px;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #3498db;
            background: white;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 80px;
        }

        .package-selection {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 15px;
        }

        .package-card {
            border: 2px solid #e0e6ed;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #f8f9fa;
        }

        .package-card:hover {
            border-color: #3498db;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .package-card.selected {
            border-color: #3498db;
            background: #ebf3fd;
        }

        .package-card h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.3rem;
        }

        .package-price {
            font-size: 1.5rem;
            font-weight: bold;
            color: #27ae60;
            margin-bottom: 5px;
        }

        .package-original-price {
            text-decoration: line-through;
            color: #e74c3c;
            font-size: 1.1rem;
            opacity: 0.7;
        }

        .package-card input[type="radio"] {
            display: none;
        }

        .calculation-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 12px;
            margin: 25px 0;
        }

        .calculation-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .calculation-row.total {
            border-top: 2px solid #3498db;
            padding-top: 15px;
            font-weight: bold;
            font-size: 1.3rem;
            color: #2c3e50;
        }

        .btn {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-container {
            text-align: center;
            margin-top: 30px;
        }

        @media (max-width: 768px) {
            .package-selection {
                grid-template-columns: 1fr;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .form-container {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>AMC Quotation Generator</h1>
            <p>Eye Tech Securities - Professional CCTV Maintenance Services</p>
        </div>

        <div class="form-container">
            <form id="quotationForm">
                <!-- Customer Details -->
                <div class="form-section">
                    <h2 class="section-title">Customer Details</h2>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="customerName">Customer Name *</label>
                            <input type="text" id="customerName" name="customerName" required>
                        </div>
                        <div class="form-group">
                            <label for="customerPhone">Phone Number *</label>
                            <input type="tel" id="customerPhone" name="customerPhone" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="customerAddress">Address *</label>
                        <textarea id="customerAddress" name="customerAddress" rows="3" required></textarea>
                    </div>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="customerEmail">Email</label>
                            <input type="email" id="customerEmail" name="customerEmail">
                        </div>
                        <div class="form-group">
                            <label for="customerGST">GST Number</label>
                            <input type="text" id="customerGST" name="customerGST">
                        </div>
                    </div>
                </div>

                <!-- Quotation Details -->
                <div class="form-section">
                    <h2 class="section-title">Quotation Details</h2>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="quotationDate">Quotation Date *</label>
                            <input type="date" id="quotationDate" name="quotationDate" required>
                        </div>
                        <div class="form-group">
                            <label for="numberOfCameras">Number of Cameras *</label>
                            <input type="number" id="numberOfCameras" name="numberOfCameras" min="1" required>
                        </div>
                    </div>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="includeGST">
                                <input type="checkbox" id="includeGST" name="includeGST" checked> Include GST (18%)
                            </label>
                        </div>
                        <div class="form-group">
                            <label for="includeConnector">
                                <input type="checkbox" id="includeConnector" name="includeConnector" checked> Include Free Connector Replacement
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Package Selection -->
                <div class="form-section">
                    <h2 class="section-title">Select Package</h2>
                    <div class="package-selection">
                        <div class="package-card" onclick="selectPackage('residential')">
                            <input type="radio" id="residential" name="package" value="residential">
                            <h3>Residential Package</h3>
                            <div class="package-price">Rs.800 per camera</div>
                            <div class="package-original-price">Rs.1000 per camera</div>
                            <div style="margin-top: 15px; font-size: 0.9rem; color: #34495e;">
                                <div><strong>Maintenance Visits:</strong> 2</div>
                                <div><strong>Breakdown Visits:</strong> 4</div>
                            </div>
                        </div>
                        <div class="package-card" onclick="selectPackage('commercial')">
                            <input type="radio" id="commercial" name="package" value="commercial">
                            <h3>Commercial Package</h3>
                            <div class="package-price">Rs.1300 per camera</div>
                            <div class="package-original-price">Rs.1500 per camera</div>
                            <div style="margin-top: 15px; font-size: 0.9rem; color: #34495e;">
                                <div><strong>Maintenance Visits:</strong> 4</div>
                                <div><strong>Breakdown Visits:</strong> 10</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Calculation Display -->
                <div class="calculation-section" id="calculationSection" style="display: none;">
                    <h3 style="margin-bottom: 20px; color: #2c3e50;">Quotation Summary</h3>
                    <div class="calculation-row">
                        <span>Number of Cameras:</span>
                        <span id="displayCameras">0</span>
                    </div>
                    <div class="calculation-row">
                        <span>Package Selected:</span>
                        <span id="displayPackage">-</span>
                    </div>
                    <div class="calculation-row">
                        <span>Rate per Camera:</span>
                        <span id="displayRate">Rs.0</span>
                    </div>
                    <div class="calculation-row">
                        <span>Subtotal:</span>
                        <span id="displaySubtotal">Rs.0</span>
                    </div>
                    <div class="calculation-row">
                        <span>GST (18%):</span>
                        <span id="displayGST">Rs.0</span>
                    </div>
                    <div class="calculation-row">
                        <span>Calculated Total:</span>
                        <span id="displayCalculatedTotal">Rs.0</span>
                    </div>
                    <div class="calculation-row">
                        <span>Final Amount:</span>
                        <input type="number" id="finalAmount" style="width: 120px; padding: 5px; border: 1px solid #ddd; border-radius: 4px; text-align: right;" placeholder="0">
                    </div>
                    <div class="calculation-row" id="discountRow" style="display: none; color: #e74c3c;">
                        <span>Discount Applied:</span>
                        <span id="displayDiscount">Rs.0</span>
                    </div>
                    <div class="calculation-row total">
                        <span>Total Amount:</span>
                        <span id="displayTotal">Rs.0</span>
                    </div>
                </div>

                <div class="btn-container">
                    <button type="button" class="btn" onclick="generateQuotationPDF()">Generate Quotation PDF</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Set today's date as default
        document.getElementById('quotationDate').valueAsDate = new Date();

        // Package selection
        function selectPackage(packageType) {
            // Remove selected class from all cards
            document.querySelectorAll('.package-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // Add selected class to clicked card
            event.currentTarget.classList.add('selected');
            
            // Select the radio button
            document.getElementById(packageType).checked = true;
            
            // Update calculation
            updateCalculation();
        }

        // Update calculation when inputs change
        document.getElementById('numberOfCameras').addEventListener('input', updateCalculation);
        document.querySelectorAll('input[name="package"]').forEach(radio => {
            radio.addEventListener('change', updateCalculation);
        });
        document.getElementById('includeGST').addEventListener('change', updateCalculation);

        function updateCalculation() {
            const cameras = parseInt(document.getElementById('numberOfCameras').value) || 0;
            const packageType = document.querySelector('input[name="package"]:checked');
            const includeGST = document.getElementById('includeGST').checked;
            
            if (cameras > 0 && packageType) {
                const rates = {
                    residential: 800,
                    commercial: 1300
                };
                
                const packageNames = {
                    residential: 'Residential Package',
                    commercial: 'Commercial Package'
                };
                
                const rate = rates[packageType.value];
                const subtotal = cameras * rate;
                const gst = includeGST ? Math.round(subtotal * 0.18) : 0;
                const calculatedTotal = subtotal + gst;
                
                // Update display
                document.getElementById('displayCameras').textContent = cameras;
                document.getElementById('displayPackage').textContent = packageNames[packageType.value];
                document.getElementById('displayRate').textContent = `Rs.${rate}`;
                document.getElementById('displaySubtotal').textContent = `Rs.${subtotal.toLocaleString()}`;
                document.getElementById('displayGST').textContent = `Rs.${gst.toLocaleString()}`;
                document.getElementById('displayCalculatedTotal').textContent = `Rs.${calculatedTotal.toLocaleString()}`;
                
                const finalAmountInput = document.getElementById('finalAmount');
                if (!finalAmountInput.value) {
                    finalAmountInput.value = calculatedTotal;
                }
                
                updateFinalAmount();
                
                document.getElementById('calculationSection').style.display = 'block';
            } else {
                document.getElementById('calculationSection').style.display = 'none';
            }
        }

        function updateFinalAmount() {
            const calculatedTotal = parseInt(document.getElementById('displayCalculatedTotal').textContent.replace(/[^\d]/g, '')) || 0;
            const finalAmount = parseInt(document.getElementById('finalAmount').value) || 0;
            
            if (finalAmount > 0) {
                const discount = calculatedTotal - finalAmount;
                
                if (discount > 0) {
                    document.getElementById('displayDiscount').textContent = `Rs.${discount.toLocaleString()}`;
                    document.getElementById('discountRow').style.display = 'flex';
                } else {
                    document.getElementById('discountRow').style.display = 'none';
                }
                
                document.getElementById('displayTotal').textContent = `Rs.${finalAmount.toLocaleString()}`;
            } else {
                document.getElementById('discountRow').style.display = 'none';
                document.getElementById('displayTotal').textContent = `Rs.${calculatedTotal.toLocaleString()}`;
            }
        }

        document.getElementById('finalAmount').addEventListener('input', updateFinalAmount);

        function collectFormData() {
            const formData = new FormData(document.getElementById('quotationForm'));
            const data = {};
            
            for (let [key, value] of formData.entries()) {
                data[key] = value;
            }
            
            // Add calculated values
            const cameras = parseInt(data.numberOfCameras) || 0;
            const includeGST = document.getElementById('includeGST').checked;
            const includeConnector = document.getElementById('includeConnector').checked;
            const rates = { residential: 800, commercial: 1300 };
            const rate = rates[data.package];
            const subtotal = cameras * rate;
            const gst = includeGST ? Math.round(subtotal * 0.18) : 0;
            const calculatedTotal = subtotal + gst;
            
            const finalAmount = parseInt(document.getElementById('finalAmount').value) || calculatedTotal;
            const discount = calculatedTotal - finalAmount;
            
            data.includeGST = includeGST;
            data.includeConnector = includeConnector;
            data.rate = rate;
            data.subtotal = subtotal;
            data.gst = gst;
            data.calculatedTotal = calculatedTotal;
            data.finalAmount = finalAmount;
            data.discount = discount > 0 ? discount : 0;
            data.total = finalAmount;
            data.packageName = data.package === 'residential' ? 'Residential Package' : 'Commercial Package';
            
            return data;
        }

        function generateQuotationPDF() {
            const data = collectFormData();
            
            // Validation
            if (!data.customerName || !data.customerPhone || !data.customerAddress || 
                !data.quotationDate || !data.numberOfCameras || !data.package) {
                alert('Please fill in all required fields and select a package.');
                return;
            }
            
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            doc.setFillColor(44, 62, 80); // Dark blue background
            doc.rect(0, 0, 210, 45, 'F');
            
            doc.setTextColor(255, 255, 255); // White text
            doc.setFontSize(24);
            doc.setFont(undefined, 'bold');
            doc.text('EYE TECH SECURITIES', 105, 15, { align: 'center' });
            
            doc.setFontSize(10);
            doc.setFont(undefined, 'normal');
            doc.text('No.56/80, Medavakkam Main Road, Keelkattalai, Chennai-600117', 105, 23, { align: 'center' });
            doc.text('Ph: 9962835944 | Mail: support@eyetechsecurities.in', 105, 29, { align: 'center' });
            doc.text('GST No: 33BCMPA5207N1ZN', 105, 35, { align: 'center' });
            
            doc.setFontSize(12);
            doc.setFont(undefined, 'bold');
            doc.text('Professional CCTV Maintenance Services', 105, 41, { align: 'center' });
            
            // Reset text color for body
            doc.setTextColor(0, 0, 0);
            
            doc.setFontSize(18);
            doc.setFont(undefined, 'bold');
            doc.setTextColor(52, 152, 219); // Blue accent
            doc.text('AMC QUOTATION', 105, 60, { align: 'center' });
            
            // Decorative line under title
            doc.setDrawColor(52, 152, 219);
            doc.setLineWidth(0.5);
            doc.line(70, 63, 140, 63);
            
            // Reset text color
            doc.setTextColor(0, 0, 0);
            
            doc.setFillColor(248, 249, 250); // Light gray background
            doc.rect(15, 70, 180, 25, 'F');
            doc.setDrawColor(224, 230, 237);
            doc.rect(15, 70, 180, 25);
            
            doc.setFontSize(11);
            doc.setFont(undefined, 'bold');
            doc.text('QUOTATION DETAILS', 20, 78);
            
            doc.setFontSize(10);
            doc.setFont(undefined, 'normal');
            const quotationNo = `QTN/${new Date(data.quotationDate).getFullYear()}/${String(Math.floor(Math.random() * 1000)).padStart(3, '0')}`;
            doc.text(`Quotation No: ${quotationNo}`, 20, 85);
            doc.text(`Date: ${new Date(data.quotationDate).toLocaleDateString('en-IN')}`, 20, 91);
            doc.text('Valid for: 30 days from issue date', 120, 85);
            doc.text('Payment Terms: 30 days', 120, 91);
            
            let currentY = 105;
            doc.setFillColor(44, 62, 80);
            doc.rect(15, currentY, 180, 8, 'F');
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(12);
            doc.setFont(undefined, 'bold');
            doc.text('CUSTOMER DETAILS', 20, currentY + 5);
            
            // Reset colors and add customer info
            doc.setTextColor(0, 0, 0);
            currentY += 15;
            doc.setFontSize(10);
            doc.setFont(undefined, 'normal');
            
            doc.text(`Name: ${data.customerName}`, 20, currentY);
            doc.text(`Phone: ${data.customerPhone}`, 20, currentY + 7);
            if (data.customerEmail) {
                doc.text(`Email: ${data.customerEmail}`, 20, currentY + 14);
                currentY += 7;
            }
            
            // Handle address with better formatting
            const addressLines = doc.splitTextToSize(`Address: ${data.customerAddress}`, 170);
            currentY += 14;
            addressLines.forEach(line => {
                doc.text(line, 20, currentY);
                currentY += 7;
            });
            
            if (data.customerGST) {
                doc.text(`GST Number: ${data.customerGST}`, 20, currentY);
                currentY += 7;
            }
            
            currentY += 15;
            doc.setFillColor(44, 62, 80);
            doc.rect(15, currentY, 180, 8, 'F');
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(12);
            doc.setFont(undefined, 'bold');
            doc.text('QUOTATION BREAKDOWN', 20, currentY + 5);
            
            // Table header with elegant styling
            currentY += 15;
            doc.setFillColor(248, 249, 250);
            doc.rect(15, currentY, 180, 10, 'F');
            doc.setDrawColor(224, 230, 237);
            doc.rect(15, currentY, 180, 10);
            
            doc.setTextColor(44, 62, 80);
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            doc.text('DESCRIPTION', 20, currentY + 6);
            doc.text('QTY', 110, currentY + 6);
            doc.text('RATE', 135, currentY + 6);
            doc.text('AMOUNT', 165, currentY + 6);
            
            // Table content with better spacing
            currentY += 10;
            doc.setDrawColor(224, 230, 237);
            doc.rect(15, currentY, 180, 20); // Increased height to accommodate visit details
            
            doc.setTextColor(0, 0, 0);
            doc.setFont(undefined, 'normal');
            doc.text(`AMC Service - ${data.packageName}`, 20, currentY + 6);
            doc.text(`${data.numberOfCameras} Cameras`, 20, currentY + 10);
            
            const visitDetails = data.package === 'residential' 
                ? 'Maintenance: 2 visits, Breakdown: 4 visits'
                : 'Maintenance: 4 visits, Breakdown: 10 visits';
            doc.text(visitDetails, 20, currentY + 14);
            
            doc.text(data.numberOfCameras.toString(), 110, currentY + 10);
            doc.text(`Rs. ${data.rate}`, 135, currentY + 10);
            doc.text(`Rs. ${data.subtotal.toLocaleString()}`, 165, currentY + 10);
            
            currentY += 35; // Adjusted spacing for larger content area
            
            doc.setDrawColor(52, 152, 219);
            doc.setLineWidth(0.5);
            doc.line(120, currentY, 195, currentY);
            
            let summaryStartY = currentY + 5;
            doc.setFontSize(11);
            doc.text(`Subtotal: Rs. ${data.subtotal.toLocaleString()}`, 130, summaryStartY);
            
            let nextSummaryY = summaryStartY + 8;
            if (data.includeGST && data.gst > 0) {
                doc.text(`GST (18%): Rs. ${data.gst.toLocaleString()}`, 130, nextSummaryY);
                nextSummaryY += 8;
            }
            
            let discountY = nextSummaryY;
            if (data.discount > 0) {
                doc.setTextColor(231, 76, 60); // Red color for discount
                doc.text(`Discount: Rs. ${data.discount.toLocaleString()}`, 130, discountY);
                discountY += 8;
                doc.setTextColor(0, 0, 0); // Reset color
            }
            
            let totalY = discountY + 4;
            // Total with emphasis
            doc.setFillColor(52, 152, 219);
            doc.rect(125, totalY, 70, 10, 'F');
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(12);
            doc.setFont(undefined, 'bold');
            doc.text(`TOTAL: Rs. ${data.total.toLocaleString()}`, 130, totalY + 6);
            
            // Reset colors
            doc.setTextColor(0, 0, 0);
            
            currentY = totalY + 15;
            if (currentY > 250) {
                doc.addPage();
                currentY = 20;
            }
            
            doc.setFillColor(44, 62, 80);
            doc.rect(15, currentY, 180, 8, 'F');
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(12);
            doc.setFont(undefined, 'bold');
            doc.text('TERMS & CONDITIONS', 20, currentY + 5);
            
            // Terms content with better formatting
            currentY += 15;
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(9);
            doc.setFont(undefined, 'normal');
            
            const termTexts = [
                "The contract is applicable for 12 months from the agreement date.",
                "Contract does not cover damages due to natural disasters, misuse, power surges, lightning, fire, flood, earthquake, or act of God.",
                "Offer valid for 30 days from issue date.",
                "Equipment must be in working condition at contract signing; customer bears initial repair cost if faulty.",
                "Customer must provide ladder, water, power supply, and civil support for maintenance.",
                "Missing/stolen items during the contract are customer's liability, not covered under AMC.",
                "Technician access required during scheduled visits; no refund for missed appointments due to unavailability.",
                "Breakdown visits during working hours (Mon-Sat, 9 AM-6 PM); emergency visits may be charged.",
                "Contract is non-transferable and non-terminable before completion.",
                "Payment due within 30 days of invoice; 2% monthly penalty on overdue amounts.",
                "Maintenance includes cleaning, adjustments, calibration, software updates, and health checks.",
                "Only registered complaints via proper channels are addressed during breakdown visits.",
                "Warranty-covered items replaced free; out-of-warranty items chargeable.",
                "Material replacements, spare parts, and consumables chargeable unless under warranty.",
                "Connector replacement (Rs. 500/camera) included in first maintenance visit only.",
                "Unauthorized equipment modification voids the AMC contract.",
                "Service visits scheduled with 24-48 hours notice to customer.",
                "Customer responsible for data backup; Eye Tech Securities not liable for data loss.",
                "Additional work beyond AMC scope chargeable per prevailing rates.",
                "Disputes subject to local court jurisdiction.",
                "This contract supersedes prior agreements; modifications require mutual written consent.",
                "Force majeure conditions may temporarily suspend service obligations.",
                "Maintenance visits non-transferable and not carried forward.",
                "18% GST applies on total contract amount per tax regulations."
            ];
            
            let terms = termTexts.slice(0, 14); // Terms 1-14
            if (data.includeConnector) {
                terms.push(termTexts[14]); // Include 15th term
            }
            terms = terms.concat(termTexts.slice(15)); // Terms 16-24
            
            terms.forEach((term, index) => {
                if (currentY > 270) {
                    doc.addPage();
                    currentY = 20;
                }
                const numberedTerm = `${index + 1}) ${term}`;
                const termLines = doc.splitTextToSize(numberedTerm, 170);
                termLines.forEach(line => {
                    doc.text(line, 20, currentY);
                    currentY += 4.5;
                });
                currentY += 1;
            });
            
            if (currentY > 240) {
                doc.addPage();
                currentY = 20;
            }
            
            currentY += 20;
            
            // Signature section with elegant design
            doc.setDrawColor(224, 230, 237);
            doc.setLineWidth(0.5);
            doc.line(20, currentY, 80, currentY);
            doc.line(130, currentY, 190, currentY);
            
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            doc.text('Customer Signature', 20, currentY + 8);
            doc.text('Eye Tech Securities', 130, currentY + 8);
            
            doc.setFont(undefined, 'normal');
            doc.text('Date: ___________', 20, currentY + 15);
            doc.text('Authorized Signatory', 130, currentY + 15);
            
            currentY += 25;
            doc.setFontSize(8);
            doc.setTextColor(100, 100, 100);
            doc.text('This is a computer-generated quotation and does not require a physical signature.', 105, currentY, { align: 'center' });
            doc.text('For queries, contact Eye Tech Securities at your convenience.', 105, currentY + 5, { align: 'center' });
            
            // Save PDF with better filename
            const fileName = `AMC_Quotation_${data.customerName.replace(/\s+/g, '_')}_${new Date().toISOString().split('T')[0]}.pdf`;
            doc.save(fileName);
        }
    </script>
</body>
</html>
